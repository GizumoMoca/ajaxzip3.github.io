"use strict";function sendSubscriptionId(e){fetch("https://family1st-push.appspot.com/subscribe",{method:"post",body:JSON.stringify({subid:e.subscriptionId,href:window.location.href}),headers:{"Content-type":"application/json; charset=utf-8"}}).then(function(e){return e.json()}).then(function(e){console.log(e)})["catch"](function(e){console.log("Fetch Error :-S",e)})}function subscribeDevice(){navigator.serviceWorker.ready.then(function(e){e.pushManager.subscribe().then(function(e){sendSubscriptionId(e),console.log('curl --header "Authorization: key=API_KEY" --header Content-Type:"application/json" '+e.endpoint+' -d "{\\"registration_ids\\":[\\"'+e.subscriptionId+'\\"]}"')})})}function serviceWorkerRegistration(){navigator.serviceWorker.register("/sw.js").then(function(e){subscribeDevice()})}window.addEventListener("DOMContentLoaded",function(){"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(function(e){e?e.pushManager.getSubscription().then(function(e){e?console.log('curl --header "Authorization: key=API_KEY" --header Content-Type:"application/json" '+e.endpoint+' -d "{\\"registration_ids\\":[\\"'+e.subscriptionId+'\\"]}"'):serviceWorkerRegistration()}):serviceWorkerRegistration()})});